var Client=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t),n.d(t,"handleSubmit",(function(){return c}));let a={trips:[],maxId:0};const r=document.getElementById("showTrips"),i=()=>{r.innerHTML="",a.trips.forEach((e=>{o(e)}))},o=e=>{let t=e.id;const n=document.createElement("div");n.classList.add("tripInfo"),n.id=`tripInfo_${t}`;const a=document.createElement("div"),i=document.createElement("div");a.classList.add("location"),i.classList.add("daysToTravel"),a.innerHTML=e.destination;const o=new Date,d=o.getFullYear()+"-"+(o.getMonth()+1)+"-"+o.getDate(),c=e.departureDate,s=new Date(c)-new Date(d),l=Math.floor(s/864e5);i.innerHTML="Your trip starts in: "+l+" days";const p=document.createElement("button");p.innerHTML="Weather Forecast",p.classList.add("weather_btn");const u=e.forecast,m=document.createElement("div");m.classList.add("showForecast"),m.classList.add("collapsed"),m.appendChild(p);for(let e=0;e<u.length;e++)if(new Date(u[e].date)>new Date(c)){const t=document.createElement("div");t.classList.add("forecast_div");const n=document.createElement("div"),a=document.createElement("div"),r=document.createElement("div"),i=document.createElement("img");n.innerHTML=u[e].date,a.innerHTML=u[e].high_temp+"&deg;C/"+u[e].low_temp+"&deg;C",r.innerHTML=u[e].weather.description,i.src=`./src/client/icons/${u[e].weather.icon}.png`,t.appendChild(n),t.appendChild(a),t.appendChild(i),t.appendChild(r),m.appendChild(t)}n.appendChild(a),n.appendChild(i),n.appendChild(m),p.addEventListener("click",(function(){m.classList.toggle("collapsed")}));const g=document.createElement("div");g.classList.add("showImage");const v=document.createElement("div");v.classList.add("image_div");const f=document.createElement("img");f.src=e.photos[e.activeImage],f.id=`trip_${t}_image`,v.appendChild(f),g.appendChild(v),n.appendChild(g);const h=document.createElement("a");h.classList.add("next"),h.innerHTML="&#10095;";const y=document.createElement("a");y.classList.add("prev"),y.innerHTML="&#10094;",y.addEventListener("click",(function(){0===e.activeImage?e.activeImage=e.photos.length-1:e.activeImage--,f.src=e.photos[e.activeImage]})),h.addEventListener("click",(function(){e.activeImage===e.photos.length-1?e.activeImage=0:e.activeImage++,f.src=e.photos[e.activeImage]})),g.appendChild(y),g.appendChild(h),r.appendChild(n)},d=document.getElementById("loader");async function c(e){console.log("clicked!"),e.preventDefault();const t=document.getElementById("destination").value,n=document.getElementById("departureDate").value,r=document.getElementById("errorMsg");if(((e,t)=>{if(""!==e&&""!==t)return!0})(t,n)){d.style.display="block";const e=await(async(e="",t={})=>{const n=await fetch(e,{method:"POST",credentials:"same-origin",headers:{Accept:"application/json","Content-type":"application/json"},body:JSON.stringify(t)});try{return await n.json()}catch(e){console.log("error",e)}})("http://localhost:8081/destination",{destination:t,departureDate:n});d.style.display="none",(o=e).id=a.maxId,a.maxId++,o.activeImage=0,a.trips.push(o),localStorage.setItem("trips",JSON.stringify(a)),i()}else r.innerHTML="Please enter both destination and departure date!",r.style.color="red";var o}const s=document.getElementById("departureDate");let l=new Date,p=l.getMonth()+1;p<10&&(p="0"+p);let u=l.getFullYear()+"-"+p+"-"+(l.getDate()+1);s.setAttribute("min",u);document.getElementById("deleteTrips").addEventListener("click",(()=>{a.trips=[],a.maxId=0,localStorage.setItem("trips",JSON.stringify(a)),i()})),localStorage.getItem("trips")&&(a=JSON.parse(localStorage.getItem("trips"))),i(),"serviceWorker"in navigator&&window.addEventListener("load",(()=>{navigator.serviceWorker.register("/service-worker.js")}))}]);